
# Realism Study Unity Framework - StudyVR
<img src="https://github.com/jeffrey9911/Realism-Study-Questionnaire/blob/release/release/resources/images/IMG_000.gif" height="342">
<img src="https://github.com/jeffrey9911/Realism-Study-Questionnaire/blob/release/release/resources/images/IMG_001.gif" height="342">

Introducing [**StudyVR**](https://github.com/jeffrey9911/Realism-Study-Questionnaire) built on Unity, our automated system interfacing with an online database for user experiments. It streamlines administrative tasks, allowing researchers to focus on questions and hypotheses. Flexible and adaptable, it supports various methodologies, from simple user studies to complex experiments. All data is stored centrally, promoting collaboration.

## Prerequisites
- **Oculus Quest headset**
- **Unity** (*2022.3.3f1 LTS* is currently used, with *Android* build support)
- **Airtable account**

## Setup
### [Airtable](https://airtable.com/)
- Create your own database on Airtable
- Create the tables as below:

```
UnityAssetBundle List
    ├── This table is a synced table with Google Drive integrated. It is to save Unity Asset Bundle created by StudyVR framework.
    ├── Nothing is writable. (Synced from Google Drive)
    ├── Table name: UABList
    └── Table columns: Auto-generated by Airtable Google Drive intergration.
```

```
Response List
    ├── This table is to record responses from quesionnaire participants.
    ├── Nothing is writable. (Program will upload data to this table)
    ├── Table name: ResponseVersion
    └── Table columns:
        ├── $Participant ID (As record header, Single Line Text)
        ├── PreStudy ID (Single Line Text)
        ├── PreStudy Response (Long Text)
        ├── Questionnaire ID (Single Line Text)
        ├── Questionnaire Response (Long Text)
        ├── PostStudy ID (Single Line Text)
        └── PostStudy Response (Long Text)
```

```
Config Setup List
    ├── This table is to tell Unity program which version of config to use.
    ├── Writable.
    ├── Table name: ConfigSetup
    └── Table columns:
        └── $ForceSetup (As record header, Integer)
            ├── -1: Disable force setup config version.
            ├── -2: Stop any connection from program.
            └── >= 0: Specify a config version that the program will automatically choose.
```

```
Unity Config List
    ├── This table is to define Unity config versions.
    ├── Writable.
    ├── Table name: UnityConfig
    └── Table columns:
        ├── $UnityConfigVersion (As record header, Integer)
            └── Specify a numeric ID which will be displayed in program.
        └── jSurveyConfigs (Single Line Text)
            └── Specify a serise of Survey Versions available in this Config Version. Format: "{survey version id}//{second survey version id}//...}" (Use "//" to divide Survey Versions)
```

```
Survey Version List
    ├── This table is to define Survey versions.
    ├── Writable.
    ├── Table name: SurveyVersion
    └── Table columns:
        ├── $SurveyConfigID (As record header, Integer)
            └── Specify a numeric ID which will be displayed in program.
        ├── PreStudyID (Integer)
            └── Specify a number that is used to name a specific Pre-study question table.
        ├── QuestionnaireID (Integer)
            └── Specify a number that is used to name a specific Questionnaire question table.
        └── PostStudyID (Integer)
            └── Specify a number that is used to name a specific Post-study question table.
```

```
Pre-study Question Tables
    ├── This table is to define questions in pre-study. All questions in this table will be showed before questionnaire trial.
    ├── Writable.
    ├── Table name: PreStudyV + {Version number} (Example: PreStudyV0, Program will find this table by "name + version number")
    └── Table columns:
        ├── $QuestionID (As record header, Integer)
            └── Specify a numeric ID which will be displayed in program.
        ├── ResponseType (Single Select, *see details below)
        ├── ResponseConfig (Long Text, *see details below)
        └── QuestionString (Single Line Text)
            └── Specify a single-line text that will be displayed on program's UI as a question title.
```

```
Post-study Question Tables
    ├── This table has exactly the same format as Pre-study Question Tables. All questions in this table will be showed after questionnaire trial.
    ├── Writable.
    ├── Table name: PostStudyV + {Version number} (Example: PostStudyV2, Program will find this table by "name + version number")
    └── Table columns:
        ├── $QuestionID (As record header, Integer)
            └── Specify a numeric ID which will be displayed in program.
        ├── ResponseType (Single Select, *see details below)
        ├── ResponseConfig (Long Text, *see details below)
        └── QuestionString (Single Line Text)
            └── Specify a single-line text that will be displayed on program's UI as a question title.
```

```
Questionnaire Question Tables
    ├── This table is to define questions in questionnaire trial.
    ├── Writable.
    ├── Table name: QuestionnaireV + {Version number} (Example: QuestionnaireV1, Program will find this table by "name + version number")
    └── Table columns:
        ├── $QuestionID (As record header, Integer)
            └── Specify a numeric ID which will be displayed in program.
        ├── ResponseType (Single Select, *see details below)
        ├── ResponseConfig (Long Text, *see details below)
        ├── QuestionString (Single Line Text)
            └── Specify a single-line text that will be displayed on program's UI as a question title.
        ├── AssetResponseType (Single Select)
            └── This column has two choices: Evaluation and Comparison.
        ├── Asset(0) (Link to UABList, so this can select Unity Asset Bundles from UABList)
            └── This column will be used if the "AssetResponseType" is "Evaluation" or "Comparison".
        └── Asset(1) (Link to UABList, so this can select Unity Asset Bundles from UABList)
            └── This column will only be used if the "AssetResponseType" is "Comparison".
```

```
Explanation for Response Type and Response Config
Response Type: (All "\n" represents an entre or new line)
    ├── GodSpeedSlider
        ├── With this type, the program will load up to 4 questions at a time and generate a 0 to 5 grading slider for each one.
        └── Response Config: {\n(Text on side of 0)\n(Text on side of 5)\n} (Example: {\nBad\nGood\n})
    ├── SingleSelect
        ├── The program will load choices from response config and generate a single-select question.
        └── Response Config: {\n(1st choice)\n(2nd choice)\n...} (Maximum 12 choices, Example: {\nMale\nFemale\nNon-Binary\nPrefer Not To Say\n})
    ├── MultiSelect
        ├── The program will load choices from response config and generate a multiple-select question.
        └── Response Config: {\n(1st choice)\n(2nd choice)\n...} (Maximum 12 choices, Example: {\nI agree\nI acknowledge\n})
    ├── IntSlider
        ├── With this type, the program will read a minimum and a maximum integer number and generate a selection slider with min and max.
        └── Response Config: {\nmin:(Minimum number)\nmax:(Maximum number)\n} (Example: {\nmin:-3\nmax:3\n})
    └── TextInput
        ├── The program will generate a text input field which user can input numbers.
        └── Response Config: {\n} (Give it an empty config, Example: {\n})
```

### Unity
- Clone this project and open [**StudyVR-Unity**](https://github.com/jeffrey9911/Realism-Study-Questionnaire/tree/main/StudyVR-Unity) in UnityHub with **Android** build target.
- Manually import [**Oculus Integration**](https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022)
- **TextMeshPro** from package manager
- Import or create an **EnvKey.cs** class anywhere in the Assets folder. (*see details about EnvKey class below)
- Fix any incorrect settings in Oculus Integration tab for Oculus Android build.
- Test if it can build to an APK package and run in the headset.